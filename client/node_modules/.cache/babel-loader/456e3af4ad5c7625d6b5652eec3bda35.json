{"ast":null,"code":"import ShopActionTypes from \"./shop.types\";\nimport { getShopData, firestore } from \"../../firebase/firebase.utils\";\nexport const fetchCollectionsStart = () => ({\n  // start fetching collections\n  type: ShopActionTypes.FETCH_COLLECTIONS_START\n});\nexport const fetchCollectionsSuccess = collections => ({\n  // if fetch was successful send the data fetched as payload\n  type: ShopActionTypes.FETCH_COLLECTIONS_SUCCESS,\n  payload: collections\n});\nexport const fetchCollectionsFailure = errorMessage => ({\n  type: ShopActionTypes.FETCH_COLLECTIONS_FAILURE,\n  payload: errorMessage\n});\n/*  thunks are actionCreators that returns a function instead of action(i.e normal actionCreators return object as in above functions)..They also get\n'dispatch' as its argument...So whenever an Action-Creator returns a 'function', thunk automatically attaches to it and using dispatch we can dispatch other\nactions inside this thunk...Thunk is mainly used to perform asynchronous actions... */\n//  this is thunk as it returns a function...This is the function which is actually run by component which requires shopData and this dispatches the \n//  other actions and can handle async codes\n\nexport const fetchCollectionsStartAsync = () => {\n  return async dispatch => {\n    const collectionRef = firestore.collection('collections'); // get Collection reference of our collection called 'collections'\n\n    dispatch(fetchCollectionsStart());\n\n    try {\n      const collectionSnapshot = await collectionRef.get(); // note below\n\n      const shopData = getShopData(collectionSnapshot);\n      dispatch(fetchCollectionsSuccess(shopData));\n    } catch (error) {\n      dispatch(fetchCollectionsFailure(error.message));\n    }\n  };\n};\n/*  OR use below code instead of .get()\n        \n        this.unsubscribeFromSnapshot= collectionRef.onSnapshot(async snapshot=>{\n            const shopData= getShopData(snapshot);\n            ............\n        }) \n\n        We can use onSnapshot or normal get method like other NOSQL db's to get data..Advantage of onSnpashot is that it is an event listener following\n        Observable pattern and listens for changes(events) on Snapshot and returns the result continously unlike get which is 1-time only...SInce in this\n        case we need ShopData only once, we can use the get method */","map":{"version":3,"sources":["/Users/r0k01xr/react_course/e-commerce_apparel_webiste/client/src/redux/shop/shop.actions.js"],"names":["ShopActionTypes","getShopData","firestore","fetchCollectionsStart","type","FETCH_COLLECTIONS_START","fetchCollectionsSuccess","collections","FETCH_COLLECTIONS_SUCCESS","payload","fetchCollectionsFailure","errorMessage","FETCH_COLLECTIONS_FAILURE","fetchCollectionsStartAsync","dispatch","collectionRef","collection","collectionSnapshot","get","shopData","error","message"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,cAA5B;AACA,SAAQC,WAAR,EAAoBC,SAApB,QAAoC,+BAApC;AAEA,OAAO,MAAMC,qBAAqB,GAAG,OAAO;AAAI;AAC5CC,EAAAA,IAAI,EAAEJ,eAAe,CAACK;AADkB,CAAP,CAA9B;AAIP,OAAO,MAAMC,uBAAuB,GAAEC,WAAW,KAAG;AAAK;AACrDH,EAAAA,IAAI,EAACJ,eAAe,CAACQ,yBAD2B;AAEhDC,EAAAA,OAAO,EAAEF;AAFuC,CAAH,CAA1C;AAIP,OAAO,MAAMG,uBAAuB,GAAEC,YAAY,KAAG;AACjDP,EAAAA,IAAI,EAACJ,eAAe,CAACY,yBAD4B;AAEjDH,EAAAA,OAAO,EAAEE;AAFwC,CAAH,CAA3C;AAKP;;;AAIA;AACA;;AAEA,OAAO,MAAME,0BAA0B,GAAC,MAAI;AACxC,SAAO,MAAMC,QAAN,IAAgB;AACnB,UAAMC,aAAa,GAAEb,SAAS,CAACc,UAAV,CAAqB,aAArB,CAArB,CADmB,CACuC;;AAC1DF,IAAAA,QAAQ,CAACX,qBAAqB,EAAtB,CAAR;;AAEA,QAAI;AACA,YAAMc,kBAAkB,GAAE,MAAMF,aAAa,CAACG,GAAd,EAAhC,CADA,CACsD;;AACtD,YAAMC,QAAQ,GAAGlB,WAAW,CAACgB,kBAAD,CAA5B;AACAH,MAAAA,QAAQ,CAACR,uBAAuB,CAACa,QAAD,CAAxB,CAAR;AACH,KAJD,CAIE,OAAOC,KAAP,EAAc;AACZN,MAAAA,QAAQ,CAACJ,uBAAuB,CAACU,KAAK,CAACC,OAAP,CAAxB,CAAR;AACH;AACJ,GAXD;AAYH,CAbM;AAcP","sourcesContent":["import ShopActionTypes from \"./shop.types\";\nimport {getShopData,firestore} from \"../../firebase/firebase.utils\";\n\nexport const fetchCollectionsStart = () => ({   // start fetching collections\n    type: ShopActionTypes.FETCH_COLLECTIONS_START,\n});\n\nexport const fetchCollectionsSuccess= collections=>({    // if fetch was successful send the data fetched as payload\n    type:ShopActionTypes.FETCH_COLLECTIONS_SUCCESS,\n    payload: collections\n});\nexport const fetchCollectionsFailure= errorMessage=>({\n    type:ShopActionTypes.FETCH_COLLECTIONS_FAILURE,\n    payload: errorMessage\n})\n\n/*  thunks are actionCreators that returns a function instead of action(i.e normal actionCreators return object as in above functions)..They also get\n'dispatch' as its argument...So whenever an Action-Creator returns a 'function', thunk automatically attaches to it and using dispatch we can dispatch other\nactions inside this thunk...Thunk is mainly used to perform asynchronous actions... */\n\n//  this is thunk as it returns a function...This is the function which is actually run by component which requires shopData and this dispatches the \n//  other actions and can handle async codes\n\nexport const fetchCollectionsStartAsync=()=>{\n    return async dispatch=>{\n        const collectionRef= firestore.collection('collections'); // get Collection reference of our collection called 'collections'\n        dispatch(fetchCollectionsStart());\n        \n        try {\n            const collectionSnapshot= await collectionRef.get();  // note below\n            const shopData = getShopData(collectionSnapshot);\n            dispatch(fetchCollectionsSuccess(shopData));\n        } catch (error) {\n            dispatch(fetchCollectionsFailure(error.message));\n        }\n    }\n}\n/*  OR use below code instead of .get()\n        \n        this.unsubscribeFromSnapshot= collectionRef.onSnapshot(async snapshot=>{\n            const shopData= getShopData(snapshot);\n            ............\n        }) \n\n        We can use onSnapshot or normal get method like other NOSQL db's to get data..Advantage of onSnpashot is that it is an event listener following\n        Observable pattern and listens for changes(events) on Snapshot and returns the result continously unlike get which is 1-time only...SInce in this\n        case we need ShopData only once, we can use the get method */"]},"metadata":{},"sourceType":"module"}